# 投資・資産運用計算機 プロジェクトドキュメント

## 📚 目次

1. [プロジェクト概要・目的](#1-プロジェクト概要目的)
2. [機能一覧](#2-機能一覧)
3. [技術スタック](#3-技術スタック)
4. [プロジェクト構成](#4-プロジェクト構成)
5. [収益化戦略](#5-収益化戦略)
6. [開発スケジュール](#6-開発スケジュール)
7. [成功指標（KPI）](#7-成功指標kpi)

**📁 関連ドキュメント**
- [デプロイ・運用戦略](deployment-strategy.md)
- [開発ツール・品質管理](development-tools.md)
- [技術仕様詳細](technical-specs.md)

---

## 1. プロジェクト概要・目的

**InvestCalc（インベストカルク）**

投資・資産運用に関する各種計算を行うWebツール集。複利計算、つみたてNISA、iDeCo、住宅ローン、ふるさと納税など、個人の資産形成・税務に必要な計算を簡単に行える実用ツールサイト。

**コア価値**
- 複雑な金融計算・税務計算を誰でも簡単に実行できる
- 視覚的でわかりやすい結果表示
- SEO最適化による高い検索流入
- 高単価な金融系・税務系広告による収益化

---

## 2. 機能一覧

### 🔴 優先度1（MVP・初回リリース）

**複利計算機** ✅
- 元本・利率・期間を入力して将来価値を計算
- 月額積立での複利計算
- 計算結果のグラフ表示
- 結果の詳細説明

**ふるさと納税計算機** ✨ **NEW**
- 年収・家族構成から控除上限額を自動計算
- 住民税・所得税の軽減額表示
- 実質自己負担額（2,000円）の確認
- おすすめ寄附金額のシミュレーション
- 医療費控除・住宅ローン控除等の他控除との併用計算

**基本UI/UX** ✅
- レスポンシブデザイン
- 入力フォームのバリデーション
- 計算結果のリアルタイム更新
- 基本的なSEO設定

**分析・運用**
- Cloudflare Web Analytics導入
- 基本的なエラーハンドリング

**テスト・品質管理** ✨ **NEW**
- Jest導入・設定
- ユニットテスト（計算ロジック）
- ユニットテスト（コンポーネント）
- Playwrightテスト環境構築

### 🟡 優先度2（機能拡充）

**つみたてNISA計算機**
- 年間投資枠（120万円）を考慮した計算
- 20年間の投資シミュレーション
- 非課税効果の可視化

**iDeCo計算機**
- 職業別拠出上限額の自動判定
- 所得税・住民税の節税効果計算
- 受取時の税額計算

**住宅ローン計算機**
- 月々返済額計算
- 繰り上げ返済シミュレーション
- 借り換え効果計算

**収益化準備**
- Google AdSense申請・設置
- アフィリエイト準備
- A/Bテスト基盤

### 🟢 優先度3（最適化・拡張）

**高度な計算機能**
- ポートフォリオ分析
- リバランス計算
- 退職金運用シミュレーション
- インフレ調整計算

**税務関連機能拡張** ✨ **NEW**
- 確定申告シミュレーション
- 扶養控除最適化計算
- 副業・フリーランス税額計算

**コンテンツマーケティング**
- 計算ツール解説記事
- 投資・資産運用ガイド
- ふるさと納税活用術記事 ✨ **NEW**
- 最新金利情報の自動更新

**ユーザビリティ向上**
- 計算履歴保存（LocalStorage）
- 計算結果のPDF出力
- URL共有機能
- プリセット設定

---

## 3. 技術スタック

### 🌐 フロントエンド

**基盤技術**
- **フレームワーク**: React 18 + Next.js 14 (App Router)
- **言語**: TypeScript
- **デプロイ**: Netlify

**UI・スタイリング**
- **CSSフレームワーク**: Tailwind CSS
- **UIライブラリ**: shadcn/ui
- **アイコン**: Lucide React
- **チャート**: Recharts（グラフ表示用）

**状態・データ管理**
- **状態管理**: Zustand（計算履歴・設定用）
- **フォーム管理**: React Hook Form + Zod
- **データ永続化**: LocalStorage（計算履歴）

**計算・分析**
- **金融計算**: カスタム計算関数
- **税務計算**: カスタム税額計算関数 ✨ **NEW**
- **数学ライブラリ**: mathjs（必要に応じて）
- **日時処理**: date-fns

**テスト・品質管理** ✨ **NEW**
- **ユニットテスト**: Jest + React Testing Library
- **E2Eテスト**: Playwright
- **開発環境**: Storybook
- **カバレッジ**: c8 (V8 coverage)

### ⚙️ バックエンド（最小構成）

**静的データ管理**
- **設定ファイル**: JSON形式
- **税率データ**: 定数として管理
- **ふるさと納税控除表**: 総務省データベース対応 ✨ **NEW**
- **金利データ**: 手動更新（将来API化検討）

### 📊 分析・収益化

**分析ツール**
- **Cloudflare Web Analytics**: ユーザー行動分析
- **Google Search Console**: SEO分析

**収益化**
- **Google AdSense**: ディスプレイ広告
- **アフィリエイト**: 証券会社・銀行系・ふるさと納税サイト ✨ **NEW**
- **A/Bテスト**: Netlify Analytics

---

## 4. プロジェクト構成

```
investment-calculator/
├── README.md
├── .gitignore
├── docs/                          # ドキュメント
│   ├── deployment-strategy.md    # デプロイ・運用戦略
│   ├── development-tools.md      # 開発ツール・品質管理
│   ├── technical-specs.md        # 技術仕様詳細
│   └── monetization/             # 収益化戦略
├── public/                       # 静的ファイル
│   ├── images/                   # 画像素材
│   ├── icons/                    # アイコン
│   └── data/                     # 静的データ
│       ├── tax-rates.json        # 税率データ
│       ├── furusato-limits.json  # ふるさと納税控除限度額表 ✨ NEW
│       └── interest-rates.json   # 金利データ
├── .storybook/                   # Storybook設定
│   ├── main.ts
│   ├── preview.ts
│   └── manager.ts
├── tests/                        # テストファイル
│   ├── e2e/                     # Playwright E2Eテスト
│   │   ├── calculator.spec.ts
│   │   ├── furusato.spec.ts     # ふるさと納税E2Eテスト ✨ NEW
│   │   └── navigation.spec.ts
│   ├── unit/                    # ユニットテスト
│   │   ├── calculations/
│   │   └── components/
│   └── fixtures/                # テストデータ
└── src/                          # ソースコード
    ├── app/                      # Next.js App Router
    │   ├── layout.tsx            # ルートレイアウト
    │   ├── page.tsx              # ホーム（計算機一覧）
    │   ├── compound/             # 複利計算機
    │   │   └── page.tsx
    │   ├── furusato/             # ふるさと納税計算機 ✨ NEW
    │   │   └── page.tsx
    │   ├── nisa/                 # つみたてNISA計算機
    │   │   └── page.tsx
    │   ├── ideco/                # iDeCo計算機
    │   │   └── page.tsx
    │   ├── loan/                 # 住宅ローン計算機
    │   │   └── page.tsx
    │   └── blog/                 # SEO記事
    │       └── [slug]/
    │           └── page.tsx
    ├── components/               # Reactコンポーネント
    │   ├── ui/                   # shadcn/ui基本コンポーネント
    │   ├── layout/               # レイアウトコンポーネント
    │   │   ├── header.tsx
    │   │   ├── footer.tsx
    │   │   └── sidebar.tsx
    │   ├── calculators/          # 計算機コンポーネント
    │   │   ├── compound-calculator.tsx
    │   │   ├── furusato-calculator.tsx ✨ NEW
    │   │   ├── nisa-calculator.tsx
    │   │   ├── ideco-calculator.tsx
    │   │   ├── loan-calculator.tsx
    │   │   ├── compound-calculator.stories.tsx
    │   │   ├── furusato-calculator.stories.tsx ✨ NEW
    │   │   ├── nisa-calculator.stories.tsx
    │   │   ├── ideco-calculator.stories.tsx
    │   │   └── loan-calculator.stories.tsx
    │   ├── charts/               # グラフコンポーネント
    │   │   ├── growth-chart.tsx
    │   │   ├── tax-savings-chart.tsx ✨ NEW
    │   │   └── breakdown-chart.tsx
    │   ├── forms/                # 入力フォーム
    │   │   ├── calculation-form.tsx
    │   │   └── input-field.tsx
    │   └── common/               # 共通コンポーネント
    │       ├── loading.tsx
    │       ├── error-boundary.tsx
    │       └── ads.tsx
    ├── lib/                      # ユーティリティ・設定
    │   ├── calculations/         # 計算ロジック
    │   │   ├── compound.ts
    │   │   ├── furusato.ts       # ふるさと納税計算 ✨ NEW
    │   │   ├── nisa.ts
    │   │   ├── ideco.ts
    │   │   └── loan.ts
    │   ├── utils.ts              # 汎用ユーティリティ
    │   ├── constants.ts          # 定数定義
    │   ├── validations.ts        # バリデーションスキーマ
    │   └── hooks/                # カスタムフック
    │       ├── use-calculation.ts
    │       └── use-history.ts
    ├── store/                    # Zustand状態管理
    │   ├── calculation-store.ts  # 計算履歴
    │   └── ui-store.ts          # UI状態
    ├── types/                    # TypeScript型定義
    │   ├── calculation.ts        # 計算関連型
    │   ├── furusato.ts          # ふるさと納税関連型 ✨ NEW
    │   ├── chart.ts             # グラフ関連型
    │   └── common.ts            # 共通型
    └── styles/                   # スタイル
        └── globals.css
```

---

## 5. 収益化戦略

### 広告配置

**Google AdSense**
- ヘッダー下: レクタングル広告
- 計算結果下: レスポンシブ広告
- サイドバー: スカイスクレイパー広告
- 記事内: インフィード広告

**アフィリエイト**
- 証券会社の口座開設
- 銀行の住宅ローン
- 保険の見直し相談
- FP相談サービス
- **ふるさと納税サイト**: 楽天ふるさと納税、ふるさとチョイス等 ✨ **NEW**

### 収益予想

**月間PV別収益予想**
- 1万PV: 5,000-15,000円
- 5万PV: 25,000-75,000円  
- 10万PV: 50,000-150,000円
- 20万PV: 100,000-300,000円

※金融系・税務系は広告単価が高いため、一般的なサイトの2-3倍の収益が期待できる
※ふるさと納税は年末にかけて検索ボリューム急増（10-12月に売上の60%集中）

---

## 6. 開発スケジュール

### Phase 1: MVP開発（3-4週間）
- **Week 1**: 環境構築、基本レイアウト、複利計算機
- **Week 2**: ふるさと納税計算機開発、税額計算ロジック実装 ✨ **NEW**
- **Week 3**: UI/UX改善、グラフ表示、バリデーション、Storybook環境構築
- **Week 4**: SEO最適化、Google Analytics導入、Playwrightテスト実装、Netlifyデプロイ

### Phase 2: 機能拡充（4-5週間）
- **Week 5-6**: つみたてNISA・iDeCo計算機開発、Storybook追加
- **Week 7**: 住宅ローン計算機開発、E2Eテスト拡充
- **Week 8-9**: AdSense申請・設置、アフィリエイト準備（ふるさと納税サイト含む）、テスト自動化

### Phase 3: 最適化（2-3週間）
- **Week 10-11**: A/Bテスト、SEO記事作成（ふるさと納税活用術含む）、パフォーマンス最適化
- **Week 12**: 本格運用開始、監視体制構築、AWS移行準備

---

## 7. 成功指標（KPI）

### トラフィック指標
- **月間PV**: 3ヶ月後に1万PV、6ヶ月後に5万PV
- **オーガニック流入**: 全流入の80%以上
- **直帰率**: 60%以下
- **滞在時間**: 平均3分以上
- **ふるさと納税計算機利用率**: 年末期（10-12月）に全計算の40%以上 ✨ **NEW**

### 収益指標
- **AdSense収益**: 3ヶ月後に月1万円、6ヶ月後に月5万円
- **アフィリエイト収益**: 6ヶ月後に月2万円
- **ふるさと納税アフィリエイト**: 年末期に月1万円以上 ✨ **NEW**
- **RPM（1000PV当たり収益）**: 1000円以上

### 利用者指標
- **計算機利用率**: 訪問者の70%以上が計算機を利用
- **複数ツール利用率**: 30%以上
- **リピート率**: 20%以上
- **ふるさと納税→投資計算機の遷移率**: 15%以上 ✨ **NEW**

### 開発品質指標
- **テストカバレッジ**: 80%以上（ユニットテスト）
- **E2Eテスト成功率**: 95%以上
- **Storybook更新率**: 新コンポーネントの100%カバー
- **ビルド成功率**: 95%以上

## 🚀 ふるさと納税計算機の詳細仕様 ✨ **NEW**

### 入力項目
- 年収（給与所得・事業所得対応）
- 家族構成（配偶者、扶養親族数）
- 社会保険料控除額
- 生命保険料控除
- 地震保険料控除
- 住宅ローン控除額
- 医療費控除額

### 計算・表示項目
- 寄附金控除限度額
- おすすめ寄附金額（限度額の90%）
- 実質自己負担額（2,000円確認）
- 住民税軽減額
- 所得税還付額
- 控除シミュレーション（他の控除との併用効果）

### SEO対策キーワード
- 「ふるさと納税 計算」
- 「ふるさと納税 限度額」
- 「ふるさと納税 シミュレーション」
- 「年収別 ふるさと納税」

このドキュメントを基に、段階的に開発を進めていきます。ふるさと納税計算機は年末需要が高いため、優先的に開発することで収益向上が期待できます。