# é–‹ç™ºãƒ„ãƒ¼ãƒ«ãƒ»å“è³ªç®¡ç†

## ğŸ“š ç›®æ¬¡

1. [Storybookè¨­å®š](#1-storybookè¨­å®š)
2. [Playwright ãƒ†ã‚¹ãƒˆ](#2-playwright-ãƒ†ã‚¹ãƒˆ)
3. [CI/CD ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³](#3-cicd-ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³)
4. [ã‚³ãƒ¼ãƒ‰å“è³ªç®¡ç†](#4-ã‚³ãƒ¼ãƒ‰å“è³ªç®¡ç†)
5. [é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼](#5-é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼)

---

## 1. Storybookè¨­å®š

### åŸºæœ¬è¨­å®š

**.storybook/main.ts**
```typescript
import type { StorybookConfig } from '@storybook/nextjs';

const config: StorybookConfig = {
  stories: ['../src/**/*.stories.@(js|jsx|ts|tsx|mdx)'],
  addons: [
    '@storybook/addon-essentials',
    '@storybook/addon-interactions',
    '@storybook/addon-a11y',
    '@storybook/addon-viewport',
    '@storybook/addon-docs',
  ],
  framework: {
    name: '@storybook/nextjs',
    options: {},
  },
  docs: {
    autodocs: 'tag',
  },
};

export default config;
```

**.storybook/preview.ts**
```typescript
import type { Preview } from '@storybook/react';
import '../src/styles/globals.css';

const preview: Preview = {
  parameters: {
    actions: { argTypesRegex: '^on[A-Z].*' },
    controls: {
      matchers: {
        color: /(background|color)$/i,
        date: /Date$/,
      },
    },
    viewport: {
      viewports: {
        mobile: {
          name: 'Mobile',
          styles: { width: '375px', height: '667px' },
        },
        tablet: {
          name: 'Tablet',
          styles: { width: '768px', height: '1024px' },
        },
        desktop: {
          name: 'Desktop',
          styles: { width: '1200px', height: '800px' },
        },
      },
    },
  },
};

export default preview;
```

### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆStoryä¾‹

**compound-calculator.stories.tsx**
```typescript
import type { Meta, StoryObj } from '@storybook/react';
import { CompoundCalculator } from './compound-calculator';

const meta: Meta<typeof CompoundCalculator> = {
  title: 'Calculators/CompoundCalculator',
  component: CompoundCalculator,
  parameters: {
    layout: 'centered',
    docs: {
      description: {
        component: 'è¤‡åˆ©è¨ˆç®—æ©Ÿã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã€‚å…ƒæœ¬ã¨æœˆã€…ã®ç©ç«‹é¡ã‹ã‚‰å°†æ¥ä¾¡å€¤ã‚’è¨ˆç®—ã—ã¾ã™ã€‚',
      },
    },
  },
  tags: ['autodocs'],
  argTypes: {
    onCalculate: { action: 'calculated' },
  },
};

export default meta;
type Story = StoryObj<typeof meta>;

export const Default: Story = {};

export const WithInitialValues: Story = {
  args: {
    initialValues: {
      principal: 1000000,
      monthlyContribution: 50000,
      annualRate: 0.05,
      years: 10,
    },
  },
};

export const SmallAmount: Story = {
  args: {
    initialValues: {
      principal: 100000,
      monthlyContribution: 10000,
      annualRate: 0.03,
      years: 5,
    },
  },
};

export const LargeAmount: Story = {
  args: {
    initialValues: {
      principal: 10000000,
      monthlyContribution: 200000,
      annualRate: 0.07,
      years: 20,
    },
  },
};
```

### Story ä½œæˆã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

**å¿…é ˆStory:**
- `Default`: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆçŠ¶æ…‹
- `WithData`: ãƒ‡ãƒ¼ã‚¿ãŒå…¥ã£ãŸçŠ¶æ…‹
- `Loading`: ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹
- `Error`: ã‚¨ãƒ©ãƒ¼çŠ¶æ…‹

**æ¨å¥¨Story:**
- `Mobile`: ãƒ¢ãƒã‚¤ãƒ«è¡¨ç¤º
- `EdgeCases`: ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹
- `Interactions`: ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ

---

## 2. Playwright ãƒ†ã‚¹ãƒˆ

### åŸºæœ¬è¨­å®š

**playwright.config.ts**
```typescript
import { defineConfig, devices } from '@playwright/test';

export default defineConfig({
  testDir: './tests/e2e',
  fullyParallel: true,
  forbidOnly: !!process.env.CI,
  retries: process.env.CI ? 2 : 0,
  workers: process.env.CI ? 1 : undefined,
  reporter: [
    ['html'],
    ['junit', { outputFile: 'test-results/results.xml' }],
  ],
  use: {
    baseURL: 'http://localhost:3000',
    trace: 'on-first-retry',
    screenshot: 'only-on-failure',
  },
  projects: [
    {
      name: 'chromium',
      use: { ...devices['Desktop Chrome'] },
    },
    {
      name: 'firefox',
      use: { ...devices['Desktop Firefox'] },
    },
    {
      name: 'webkit',
      use: { ...devices['Desktop Safari'] },
    },
    {
      name: 'Mobile Chrome',
      use: { ...devices['Pixel 5'] },
    },
  ],
  webServer: {
    command: 'npm run dev',
    url: 'http://localhost:3000',
    reuseExistingServer: !process.env.CI,
  },
});
```

### ãƒ†ã‚¹ãƒˆä¾‹

**tests/e2e/calculator.spec.ts**
```typescript
import { test, expect } from '@playwright/test';

test.describe('è¤‡åˆ©è¨ˆç®—æ©Ÿ', () => {
  test.beforeEach(async ({ page }) => {
    await page.goto('/compound');
  });

  test('åŸºæœ¬çš„ãªè¨ˆç®—æ©Ÿèƒ½', async ({ page }) => {
    // å…¥åŠ›å€¤ã‚’è¨­å®š
    await page.fill('[data-testid="principal-input"]', '1000000');
    await page.fill('[data-testid="monthly-input"]', '50000');
    await page.fill('[data-testid="rate-input"]', '5');
    await page.fill('[data-testid="years-input"]', '10